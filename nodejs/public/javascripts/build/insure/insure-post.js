/**
 ** 
 ** www.huize.com; 
 ** Version:0.1.0;
 ** Last Updated:2016-08-09; 
 **
 **/
define(["helper"],function(a){"use strict";var b,c=function(){},d=".field-item *[data-moduleid],.saveContract *[data-moduleid]";return c.prototype={isSubmiting:!1,initPost:function(){},submit:function(){if(!this.isSubmiting){var b=this,c=b.getPostData(),d="/api/insurance-slips/"+b.insurance.insureNum;b.validatePostData(c)&&(b.isSubmiting=!0,b.message.show(b.TEXT_SUBMIT,"loading"),a.request.postData2({url:d,data:c,method:"PUT"},function(c){if(b.message.hide(),b.isSubmiting=!1,!c.message){if(c.result.priceTableChange){var d=b.saveCallBackErr("priceTableChange");return void d()}if(c.result.settlementUuid)return void(location.href="/orders/settlement/"+c.result.settlementUuid);if(c.result.insureResponseInfo.errorCode)b.currrentUserId=c.result.userId,b.showSaveError(c.result.insureResponseInfo);else{var e=[{insuranceNum:c.result.insureNum,premium:c.result.restrictRule.preminum}];a.request.postData2({url:"/api/orders/settlement",data:e},function(a){return a.result.insuranceResult&&a.result.insuranceResult.errorMsg?void b.message.show(a.result.insuranceResult.errorMsg,"error"):void(a.result.uuid&&(location.href="/orders/settlement/"+a.result.uuid))})}}},function(a){b.message.hide(),b.isSubmiting=!1,layer.msg(a.message),10312===a.status&&setTimeout(function(){window.location.href="//i.huize.com/?url=policy/policyAll"},2e3)}))}},againSubmit:!1,saveToShopCar:function(){if(!this.isSubmiting){var b=this,c=b.getPostData(!0),d="/api/insurance-slips/"+b.insurance.insureNum;b.message.show(b.TEXT_SUBMIT,"loading"),b.isSubmiting=!0,a.request.postData2({url:d,data:c,method:"PUT"},function(a){if(b.message.hide(),b.isSubmiting=!1,a.message)b.currrentUserId=a.result.userId,b.showSaveError(a.result.insureResponseInfo);else{if(a.result.priceTableChange){var c=b.saveCallBackErr("priceTableChange");return void c()}a.result.insureResponseInfo.errorCode?(b.currrentUserId=a.result.userId,b.showSaveError(a.result.insureResponseInfo)):(layer.msg("保存成功"),setTimeout(function(){window.location.href="//is.huize.com/shopping-cart/"},2e3))}},function(a){b.message.hide(),b.isSubmiting=!1,layer.msg(a.message)})}},getPostData:function(a){var c,d=this;return b={},b.frontVipPrice=d.totalPrice,b.againSubmit=d.againSubmit,b.genes=d.insurance.genes,b.applicantPersonInfo=d.getDataByModule("module-10"),b.insuredPersonInfoList=d.getDataByModule("module-20"),b.urgencyContactInfo=d.getDataByModule("module-101"),b.dynamicModuleInfoList=d.getdynamicModule(),b.insureNum=d.insurance.insureNum,b.inShoppingCart=!1,a?(b.mandatoryAttributeFillSize=d.getmandatoryAttributeFill(),b.jumpSettlement=!1):(b.mandatoryAttributeFillSize=d.getAttributeControl(),b.jumpSettlement=!0),b.mandatoryAttributeTotalSize=d.getAttributeControl(),c=$("[name='idCardFileIDList']").val().split(","),b.idCardFileIDList=$.grep(c,function(a){return""!==a}),b.insuranceDateInfo=d.getDataByModule("module-102"),b.deallineText="",b.planId=d.productPlanId,b.productId=d.productId,b.tryVerify=d.submitStatus,b.agree=$("#clauseInfo").hasClass("hz-check-item-checked"),b=d.getRelations(b),"undefined"!=typeof console,b},validatePostData:function(a){var b=this,c=!0;return b.validateInsurantRelation(a)||(c=!1),b.validateInsurantSelfInfo(a)||(c=!1),c},postCallback:function(a){},getdynamicModule:function(){var a,b,c,d=[],e=[],f=this;return $("#insureBox .insure-step-body  .credentials-form[data-index]").each(function(){b={},a=$(this),a.attr("id")&&!a.hasClass("list-table-row")&&(c=a.attr("id").split("-")[1],(3===c.length&&"102"!==c||"40"===c)&&(e=$("*[data-moduleid],*[data-moduleid][type='hidden']",a),b.data=f.getKeyValueByModule(e),b.moduleId=c,d.push(b)))}),d},getDataByModule:function(a){var c,e=$("#"+a+":visible"),f=this;if(e.length)switch(a){case"module-20":var g=[],h={},i=$("#module-20 *[data-insuranttype]:visible"),j=i.attr("data-insuranttype");return"more"===j?($("#addMoreBox .person-write-info").each(function(){c=$(d,this),h=f.getKeyValueByModule(c),h.insureBeneficiaryType=$(this).find(".beneficiarytype-select  .hz-select-option-selected").attr("value")||1,h.beneficiaryList=f.getBeneficiarylist($(this)),h.genes=JSON.stringify(JSON.parse($(".credentials-form",this).attr("data-genes")).genes),b.genes=JSON.parse(h.genes),g.push(h)}),b.insureinsurantType=22):"myself"===j?(c=$(d,e.find("[data-insuranttype=myself]")),h=f.getKeyValueByModule(c),h.insureBeneficiaryType=e.find("[data-insuranttype=myself] .beneficiarytype-select  .hz-select-option-selected").attr("value")||1,b.applicantPersonInfo=$.extend({},b.applicantPersonInfo,h),b.genes=JSON.parse(i.attr("data-genes")).genes,b.applicantPersonInfo.beneficiaryList=f.getBeneficiarylist(e),b.insureinsurantType=20):"team"===j?($("#teamBody > li").each(function(){c=$("*[data-moduleid]",this),h=f.getKeyValueByModule(c),g.push(h)}),b.insureinsurantType=30):(c=$(d,e.find("[data-insuranttype=others]")),h=f.getKeyValueByModule(c),h.insureBeneficiaryType=e.find("[data-insuranttype=others] .beneficiarytype-select  .hz-select-option-selected").attr("value")||1,h.beneficiaryList=f.getBeneficiarylist(e),h.genes=JSON.stringify(JSON.parse(i.attr("data-genes")).genes),b.genes=JSON.parse(h.genes),g.push(h),b.insureinsurantType=21),g;default:return c=$(d,e),f.getKeyValueByModule(c)}},getBeneficiarylist:function(a){var b,c,d,e=$(".zd-beneficiary:visible",a),f=[],g=this;return e.length>0&&(b=$(".beneficiaryFirst .beneficiary-sub-box:visible",a),b.each(function(){d=$("*[data-moduleid]",this),c=g.getKeyValueByModule(d),c.serial=1,f.push(c)}),b=$(".beneficiarySecond .beneficiary-sub-box:visible",a),b.each(function(){d=$("*[data-moduleid]",this),c=g.getKeyValueByModule(d),c.serial=2,f.push(c)})),JSON.stringify(f)},getKeyValueByModule:function(a){var b,c={},d="",e="",f={};return a.each(function(){if(f=$(this),b=f.attr("name"),"true"===f.attr("isdropdown")||f.hasClass("hz-dropdown")){var a=$(".hz-select-option-selected",f);if(f.hasClass("select-area")){e=a.attr("text"),d=a.attr("value");var g=f.attr("areaName");e="请选择"===e?"":e,c[b+g]=d,c[b+g+"Text"]=e,c[b]=c[b]?c[b]+(d?"-"+d:""):d,c[b+"Text"]=c[b+"Text"]?c[b+"Text"]+(e?"-"+e:""):e,"Area"!==g||e||"bankAddress"!==b||(c[b+g]=c[b+"City"],c[b+g+"Text"]=c[b+"CityText"],c[b+"City"]=null,c[b+"CityText"]=null)}else f.hasClass("job-level")?(e=a.attr("text"),c[b]=c[b]?c[b]+(e?"-"+e:""):e):(c[b]=a.attr("data-value")||a.attr("value"),void 0===c[b]&&(c[b]=a.attr("text")||a.data("value")),"cardTypeName"===b?(c.cardTypeId=a.val()||a.data("value"),c.cardTypeName=a.attr("text")||a.html()):"fromAirport"===b?(c.fromAirportCode=a.attr("wordCode"),c.fromAirport=a.attr("text")||a.data("value")):"toAirport"===b?(c.toAirportCode=a.attr("wordCode"),c.toAirport=a.attr("text")||a.data("value")):c[b+"Text"]=a.text())}else if(f.hasClass("hz-radio-item")){if(b=b.split("-")[0],f.hasClass("hz-radio-item-checked")){var h=f.val()||f.attr("value")||0;c[b]=parseInt(h),"sex"===b||(c[b+"Text"]=f.find(".hz-radio-text").text())}}else"checkbox"===f.attr("type")?"checked"===f.attr("checked")?c[b.split("-")[0]]=!0:c[b.split("-")[0]]=!1:(c[b.split("-")[0]]=f.val()||f.data("value")||"","sex"===b.split("-")[0]&&(c[b.split("-")[0]]=f.val()||f.data("value")),"cardPeriodEnd"===b&&!c.validityTime&&f.val()&&(c.cardPeriod=c.cardPeriod+"|"+f.val()))}),c},getmandatoryAttributeFill:function(){var a=$("*[data-required='1']:visible:not(.hz-radio-item)"),b=($("*[data-required='1']:visible.hz-radio-item"),{}),c=0,d=this;return a.each(function(){b=$(this),"true"===b.attr("isdropdown")||b.hasClass("hz-dropdown")?$(".hz-select-option-selected",b).length||c++:b.hasClass("hz-radio-item")?$("input[name='"+b.attr("name")+"']:checked").length||c++:b.val()||c++}),d.getAttributeControl()-c},getAttributeControl:function(){var a=$("*[data-required='1']:visible:not(.hz-radio-item)"),b=$("*[data-required='1']:visible.hz-radio-item");return a.length+b.length/2},getRelations:function(a){var b=this,c=a.insuredPersonInfoList;return c.forEach(function(c,d){c.relationInsureInsurant=$("#forrelationtype:visible .hz-select-option-selected").val()||c.relationInsureInsurant,c.relationInsureInsurant=b.getTransfromRelations(~~c.relationInsureInsurant,~~a.applicantPersonInfo.sex)}),a},layer:function(a){var b=a.time||0,c=1;(a.closeBtn||0==a.closeBtn)&&(c=a.closeBtn);var d=a.skin||"huize-layer",e=a.type||0,f=a.title||"提示信息",g=a.shift||2,h=a.btn,i=void 0!==a.shadeClose?a.shadeClose:!0,j=a.area||["500px"],k=a.content||"";layer.open({time:b,closeBtn:c,skin:d,type:e,title:f,shift:g,btn:h,area:j,shadeClose:i,content:k,yes:function(b){a.yes&&a.yes(),layer.closeAll()},cancel:function(b){a.cancel&&a.cancel(),layer.closeAll()}}),void 0!==h&&1!==h.length||$(".layui-layer-btn0").removeClass("layui-layer-btn0").addClass("layui-layer-btn1")},submitReview:function(){var b=this;this.layer({content:'<p>您的投保单已经提交到后台审核列表，请耐心等待客服审核。</p><p style="color:#FF8E0D; font-weight:bold"><span id="insureGoToTime"></span>秒后系统自动跳回慧择网首页</p>',btn:!1}),a.timer({id:"insureGoToTime",callback:function(){layer.closeAll(),location.href=window.location.protocol+b.HOMEPAGE}})},saveInsure:function(){layer.closeAll(),this.submit()},submitContinueBuy:function(){this.saveInsure()},alertExceedBuyCountTipInfo:function(a){var b=this,c="",d="",e="",f=0,g=0,h=a.buyCountResultInfo;c=h.cname,d=b.productName;for(var i=0;i<h.insureHistoryParamInfoList.length;i++){var j=h.insureHistoryParamInfoList[i];e+=f+1+"、被保险人<font color='#0089d8'>"+j.cname+"</font>,保障期限"+j.deallineText,g+=j.buyAmount,e+="<br />",f++}var k="",l=386;if(3>=f)switch(f){case 1:l=302,k="height:42px;";break;case 2:l=344,k="height:84px;";break;default:k="height:126px;"}var m=[];if(m.push('<div class="gn-buy" style="_background:#fff;"><div style="width:470px;_width: 458px;"><div>'),m.push('<div>尊敬的用户，我们检测到被保险人<font color="#0089d8">'+c+'</font>已经购买过<font color="#0089d8">'+g+"份</font>"+d+"，如下：</div>"),m.push('<div class="gnb-bd" style="'+k+'">'+e+"</div>"),m.push('<div style="margin-top: 6px; color: #555;"><strong>相同保障期限内本产品限购'+a.buyCountResultInfo.max+"份，您无需重复投保</strong><br />如有需要，您可以修改保障期限，或者给其他被保险人投保</div>"),m.push('</div></div><div class="fb_textb" style="padding-left: 150px;"></div></div>'),b.layer({btn:["返回修改"],content:m.join("")}),f>3){var n=$("#facebox .gnb-bd").height();n>126?$("#facebox .gnb-bd").attr("style","height:126px;overflow-y:scroll;"):$("#facebox .gnb-bd").attr("style","height:126px;")}},getExistBuyCountTipInfoHtml:function(a){var b=[];b.push('<div class="gn-buy" style="_background:#fff;"><div style="height:130px;width:470px;_width: 458px; overflow-y:scroll;"><div style="height:130px;"><strong>您好！</strong><br />');var c=a.buyCountResultInfo;b.push("<div>被保险人"+c.cname+'已经购买过<font color="#0089d8">'+c.total+"份</font>"+c.InsureHistoryParamInfo[0].productName+c.InsureHistoryParamInfo[0].planName+"，保障期限分别为：</div>"),b.push('<div class="gnb-bd">');for(var d=0;d<c.InsureHistoryParamInfo.length;d++){var e=c.InsureHistoryParamInfo[d];b.push(d+1+"、"+e.deallineText),b.push("<br />")}return b.push('</div><div style="margin-top: 6px;">您还可以购买<font color="#0089d8">'+(c.max-c.total)+"份</font>，您是否要继续购买？</div>"),b.push('</div></div></div><div class="fb_textb" style="padding-left: 110px;"><div style="clear:both;"></div></div>'),b.join("")},setInsurantRelationshipErr:function(){var a=$("#divInsure [myEvent=IdentifyType]").val(),b=$("#divInsure [myEvent=IdentifyNumber]").val();$("#Insurant [myEvent=IdentifyType]").each(function(){if($(this).is(":visible")){var c=$(this).attr("id").replace("ddlInsurantIdentifyType",""),d=$("#txtInsurantIdentifyNumber"+c).val();$(this).val()==a&&d==b&&($("#ddlInsurantRelationship"+c).focus().blur(),$("#ddlInsurantRelationship"+c).attr("class","reg_inW"))}})},coverAdultInsurant:function(){this.replaceInsureInfo()},replaceInsureInfo:function(){var a=this;a.el.find("#module-20  .credentials-form:visible .insure-form").each(function(){var b=$(this).attr("name"),c=$(this).val()||$(this).attr("value")||$(this).data("value"),d=b.replace(a.regReplaceNum,""),e=a.insureModules.find('.insure-form[name^="'+d+'"]');e.hasClass("hz-radio-item")?e.each(function(){$(this).attr("value")===c&&$(this).click()}):e.hasClass("hz-dropdown")?a.dropdownSelectItem(e,c):e.val(c)}),a.insureModules.find(".id-card-input").trigger("blur"),a.dropdownSelectItem($("#forrelationtype"),a.SELFRELATIONTYPE),a.dropdownSelectItem(a.el.find("#module-20  .credentials-form:visible [data-attributeid="+a.ATTR_ID_RELATIONINSUREINSURANT+"]"),a.SELFRELATIONTYPE)},isShowHighPremiumOver:!1,showHighPremiumOver:function(){var a=this;a.isShowHighPremiumOver||(a.isShowHighPremiumOver=!0,a.layer({btn:["确认"],content:a.TEXT_HIGH_PREMIUM_OVER,yes:function(){a.isShowHighPremiumOver=!1},cancel:function(){a.isShowHighPremiumOver=!1},shadeClose:!1}))},saveCallBackErr:function(b){var c,d=this,e={UnderwritingErr:function(a,b){a.EncodeId&&(b+="<span class='rhb-tst'>您的投保单信息已保存为暂存单</span>"),d.layer({content:b})},Blacklist:function(a,b){d.layer({content:b})},SevenDay:function(b,c){for(var e,f="非常抱歉，被保险人",g="",h=!0,i=b.sameProductIdResult.length,j=0;i>j;j++)e=b.sameProductIdResult[j],g="<font color='#0089d8'>"+e.cname+"</font>",h||(f+="、"),f+=g,h=!1;f+="保额达到保险公司规定的保额限制，我们会尽快为您审核。";var k="";k='<div class="gn-buy" style="_background:#fff;height:135px;"><div>',k+=f,k+='您可以：<a target="_blank" href="//i.huize.com/Policy/Detail?insureNum='+a.url.getUrlVar("insureNumber")+'"  style="float:none;padding-right:10px;color:#0089d8;" class="gnb-link">查看订单</a>',k+="</div>",k+="<div style='clear:both;'></div><div>如有疑问，请联系<a style='color:#0089d8;' href='http://kefu.hzins.com/chat/chatting;jsessionid=1gtraisqc29f31caqabo7vhym1?referrer="+window.location.href+"&domain=hzins&businessType=Xm4FWr0dncw&language=zh'  target='_blank' id=\"clickFeedBack\">在线客服</a>，感谢您的支持！</div>",k+="</div>",d.layer({content:k,btn:""})},AdultInsurantErr1:function(a,b){1===$("#module-20 .credentials-form:visible").length?(b="尊敬的用户，由于该产品规定满18周岁后，投保人应与被保险人保持一致，请您将投保人信息修改成与被保险人一致。",d.layer({btn:["一键替换","自己修改"],yes:function(){d.coverAdultInsurant()},content:b})):(b="尊敬的用户，由于该产品规定满18周岁后，投保人应与被保险人保持一致，您输入的被保险人信息个数过多，导致不能投保，请确认后重新修改您的投保信息。",d.layer({btn:["我知道了"],content:b}))},AdultInsurantErr2:function(a,b){b="尊敬的用户，由于该产品规定满18周岁后，投保人应与被保险人保持一致，您输入的被保险人信息个数过多，导致不能投保，请确认后重新修改您的投保信息。",d.layer({btn:["我知道了"],content:b})},RelationErr:function(a,b){b="尊敬的用户，我们检测到该被保险人<span style='color: #FF0000;'>"+a.Tip+"</span>与投保人证件类型与号码一致，请您确认被保险人信息并进行关系的修改。",d.layer({btn:["返回修改"],yes:d.setInsurantRelationshipErr,content:b})},InsurantBuyCount:function(a,b){var c="";switch(a.buyCountResultInfo.type){case 0:c=d.getExistBuyCountTipInfoHtml(a),d.layer({btn:["返回修改","继续购买"],cancel:d.submitContinueBuy,content:c});break;case 1:d.alertExceedBuyCountTipInfo(a)}},InsurantHighSumInsured:function(b,c){for(var e,f="非常抱歉，被保险人",g="",h=!0,i=b.highSumInsuredResult.length,j=0;i>j;j++)e=b.highSumInsuredResult[j],g="<font color='#0089d8'>"+e.cname+"</font>",h||(f+="、"),f+=g,h=!1;f+="保额达到保险公司规定的保额限制，我们会尽快为您审核";var k="";k='<div class="gn-buy" style="_background:#fff;height:135px;"><div>',k+=f,k+='您可以：<a target="_blank" href="//i.huize.com/Policy/Detail?insureNum='+a.url.getUrlVar("insureNumber")+'"  style="float:none;padding-right:10px;color:#0089d8;" class="gnb-link">查看订单</a>',k+="</div>",k+="<div style='clear:both;'></div><div>如有疑问，请联系<a style='color:#0089d8;' href='http://kefu.hzins.com/chat/chatting;jsessionid=1gtraisqc29f31caqabo7vhym1?referrer="+window.location.href+"&domain=hzins&businessType=Xm4FWr0dncw&language=zh'  target='_blank' id=\"clickFeedBack\">在线客服</a>，感谢您的支持！</div>",k+="</div>",d.layer({content:k,btn:""}),$("#submitReview").click(function(){d.againSubmit=!0,d.saveInsure()})},AcceptancePolicyErr:function(a,b){var c="您的投保单保险公司核保失败!";c+=b;var e="";e='<div class="gn-buy" style="_background:#fff;height:135px;"><div>',e+=c,e+="</div>",e+="<div style='clear:both;'></div><div>如有疑问，请联系<a style='color:#0089d8;' href='http://kefu.hzins.com/chat/chatting;jsessionid=1gtraisqc29f31caqabo7vhym1?referrer="+window.location.href+"&domain=hzins&businessType=Xm4FWr0dncw&language=zh'  target='_blank' id=\"clickFeedBack\">在线客服</a>，感谢您的支持！</div>",e+="</div>",d.layer({content:e,btn:["我知道了"]})},OffLine:function(a,b){d.layer({btn:["确认"],content:b,yes:function(){window.location.href="//www.huize.com/product/detail-"+d.product.operationProductId+".html"}})},IncorrectStartDate:function(a,b){d.layer({content:b})},priceTableChange:function(){d.layer({btn:["确认"],content:"后台价格变更，请确认后再次提交！",yes:function(){d.trialChange()}})},defaults:function(a,b){d.layer({content:b})}};switch(b){case"37115":c=e.InsurantHighSumInsured;break;case"37111":c=e.InsurantBuyCount;break;case"37109":c=e.AdultInsurantErr1;break;case"37120":c=e.SevenDay;break;case"37103":c=e.OffLine;break;case"37202":c=e.IncorrectStartDate;break;case"37002":c=e.AcceptancePolicyErr;break;case"priceTableChange":c=e.priceTableChange;break;default:c=e.defaults}return c},showSaveError:function(a){var b=this,c=a.errorMessage||"保存保单出错";c="<span class='rhb-tmt'>"+c+"</span>";var d=b.saveCallBackErr(a.errorCode);d?d(a,c):b.saveCallBackErr("defaults")(a,c)},validateInsurantAdult:function(){var a=this,b=$("#module-20").find(".credentials-form:visible"),c=$.trim($("#module-10").find(".credentials").val()),d=$.trim($("#module-10").find(".id-card-input").val());if(b&&b.length>1){var e=!0;return b.each(function(){var b=$(this).find('[name*="birthdate"]'),f=($(this).find(".relationship"),$.trim($(this).find(".credentials").val())),g=$.trim($(this).find(".id-card-input").val()),h=b.val(),i=a.getFullAge({select:h});return i>=18&&f&&g&&(c!=f||d.toUpperCase()!=g.toUpperCase())?(a.showInsureAdultMsg(1),e=!1,!1):void 0}),e}if(b&&1===b.length){var f=$.trim(b.find(".credentials").val()),g=$.trim(b.find(".id-card-input").val());if(!f||!g)return!0;var h=b.find('[name*="birthdate"]'),i=h.val(),j=a.getFullAge({select:i});if(18>j)return!0;if(c!=f||d.toUpperCase()!=g.toUpperCase())return a.showInsureAdultMsg(2),!1}return!0},validateInsurantRelation:function(a){var b=this,c=!0,d=a.applicantPersonInfo.cardTypeId,e=a.applicantPersonInfo.cardNumber,f="";if($.each(a.insuredPersonInfoList,function(a,g){g.cardTypeId===d&&g.cardNumber===e&&g.relationInsureInsurant!==b.SELFRELATIONTYPE&&(f=g.cName,c=!1)}),!c){var g='尊敬的用户，我们检测到被保险人"'+f+'"与投保人证件类型与号码一致，请您确认被保险人信息并进行关系的修改。';b.layer({content:g})}return c},validateInsurantSelfInfo:function(a){var b=this,c=!0,d=a.applicantPersonInfo.cardTypeId,e=a.applicantPersonInfo.cardNumber,f=a.applicantPersonInfo.sex,g=a.applicantPersonInfo.birthdate,h="",i=[];if($.each(a.insuredPersonInfoList,function(a,j){j.relationInsureInsurant===b.SELFRELATIONTYPE&&(d&&j.cardTypeId&&~~j.cardTypeId!==~~d&&(c=!1,i.push("证件类型")),e&&j.cardNumber&&j.cardNumber!==e&&(c=!1,i.push("证件号码")),~~j.sex!==~~f&&(c=!1,i.push("性别")),g&&j.birthdate&&j.birthdate!==g&&(c=!1,i.push("出生日期")),c||(h=j.cName))}),!c){var j="被保人为本人时，["+i.join("、")+"]需要填写一致哦~";b.layer({content:j})}return c},validateInsurantJuveniles:function(){var a=this,b=$("#module-20").find(".credentials-form:visible");if(b&&b.length>1){var c=!0;return b.each(function(){var b=$(this).find('[name*="birthdate"]'),d=$(this).find(".relationship:visible").val()||$("#forrelationtype").val(),e=b.val(),f=a.getFullAge({select:e});return 18>f&&d&&(d=a.toInt(d),4!==d&&5!==d&&1e3!==d)?(a.showInsureAdultMsg(3),c=!1,!1):void 0}),c}if(b&&1===b.length){var d=b.find('[name*="birthdate"]'),e=b.find(".relationship:visible").val()||$("#forrelationtype").val();if(!e)return!0;var f=d.val(),g=a.getFullAge({select:f});if(18>g&&(e=a.toInt(e),4!==e&&5!==e&&1e3!==e))return a.showInsureAdultMsg(3),!1}return!0},showInsureAdultMsg:function(a){var b=this;1===a?layer.open({skin:"huize-layer",type:0,title:b.TEXT_DIALOG_TITLE_DEFAULT,shift:2,btn:["我知道了"],area:["500px"],shadeClose:!0,content:b.TEXT_MUST_MYSEFT}):2===a?layer.open({skin:"huize-layer",type:0,title:b.TEXT_DIALOG_TITLE_DEFAULT,shift:2,btn:["一键替换","自己修改"],area:["500px"],yes:function(a){b.replaceInsureInfo(),layer.closeAll()},shadeClose:!0,content:b.TEXT_MUST_MYSEFT_SAME}):3===a&&(layer.open({skin:"huize-layer",type:0,title:b.TEXT_DIALOG_TITLE_DEFAULT,shift:2,btn:["我知道了"],area:["500px"],shadeClose:!0,content:b.TEXT_INSURANT_JUVENILES}),$(".layui-layer-btn0").removeClass("layui-layer-btn0").addClass("layui-layer-btn1"))},validateInsureAge:function(a){var b=this,c=!0,d=$("#module-10").find('.insure-calendar[name*="birthdate"]'),e=d.val(),f=b.getFullAge({nowDate:b.getStartDateValue(),select:e});return 18>f&&(b.showError(d[0],b.TEXT_INSURE_MIN_AGE),c=!1,b.submitStatus=!1,a&&b.scrollTo(d)),c},getStartDateValue:function(){var a="",b=$.trim($("#module-first [data-moduleid=102]").val())||"";return 1===this.insuredAgeCalculation&&b&&(a=b),a},validateInsurantNum:function(){var a=this,b=$("#module-"+a.MODULES_ID_INSURED),c=b.find(".form-more").length;return c>a.maxPeople?(a.layer({content:a.TEXT_INSURE_MAX+a.maxPeople+a.TEXT_PEOPLE}),!1):c<a.minPeople?(a.layer({content:a.TEXT_INSURE_MIN+a.minPeople+a.TEXT_PEOPLE}),!1):!0},validateHighPremium:function(){var a=this,b=a.el.find("[data-price]:visible"),c=!1;return b.each(function(a){var b=($(this).attr("data-price")||0,$(this).attr("data-originalPrice")||0,$(this).attr("data-statuCode")||"");"36058"===b&&(c=!0)}),c?(a.showHighPremiumOver(),!1):!0}},c});