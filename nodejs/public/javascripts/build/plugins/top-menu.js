/**
 ** 
 ** www.huize.com; 
 ** Version:0.1.0;
 ** Last Updated:2016-08-09; 
 **
 **/
define(["jquery","underscore","exports","require","module","helper","layer"],function($,a,b,c,d,e,f){"use strict";var g=function(){g.prototype.init.apply(this,arguments)},h="https://passport.huize.com";g.prototype={personInfo:{},init:function(){var b=this;b.initActions(),c(["require-text!/html/public/top-menu.html"],function(c){e.request.getCrossJson({url:"//passport.huize.com/Signin/GetCustomerStateData4Jsonp"},function(d){d.QuitUrl=h+d.QuitUrl+"?returnurl="+location.href,d.SignInUrl=h+d.SignInUrl+"?returnurl="+location.href,d.RegisterUrl=h+d.RegisterUrl+"?returnurl="+location.href,$(".top-nav-wrap .top-nav-menu").prepend($(a.template(c)(d))),b.initActions(),"0"!==d.CustomerCode&&(window.hzins={},window.hzins.login=!0)})})},initActions:function(){var a=this;$("#myinfo").delegate("li","mouseover",function(){$(".drop-menu-item-body",this).removeClass("fn-hide"),$(this).addClass("top-nav-menu-item-hover")}),$("#myinfo").delegate("li","mouseleave",function(){$(".drop-menu-item-body",this).addClass("fn-hide"),$(this).removeClass("top-nav-menu-item-hover")}),$("#topMenuLoginBtn").click(function(){var a=$(this).data("href");e.state.checkLogin(function(b){(b||{}).result?window.location.reload():window.location.href=a})}),$("#btnSearchProduct").click(function(){var b=a.filterKeyWords($("#txtSearchProduct").val());if(""!==b){var c="//search.huize.com/p-1-"+encodeURI(b)+"-0-0-1";return location.href=c,!1}}),$("#txtSearchProduct").keydown(function(a){var b=a||window.event,c=b.keyCode||b.which||b.charCode;return 13==c?($("#btnSearchProduct").click(),!1):!0})},filterKeyWords:function(a){var b=/<[^>]+>/g,c=/[\~\`\!\@\#\$\%\^\&\*\{\}\,\-\_\]\[\+\:\;\"\'\=\|\\\<\>\?\/\.\(\)]/g,d=new RegExp("[`~!@#$^&*()=|{}':;',\\[\\].<>/?~！@#￥……&*（）——|{}【】‘；：”“'。，、？ⅠⅡⅢⅣⅤⅥⅦⅧⅨⅩ]");a=a.replace(b,"").replace(c,"").replace(/^\s*/,"").replace(/\s*$/,"");for(var e="",f=0;f<a.length;f++)e+=a.substr(f,1).replace(d,"");return e}},d.exports=g});