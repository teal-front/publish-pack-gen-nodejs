/**
 ** 
 ** www.huize.com; 
 ** Version:0.1.0;
 ** Last Updated:2016-08-09; 
 **
 **/
define(["jquery","layer"],function($,a){"use strict";var b={loadCss:function(a){var b=document.createElement("link");b.setAttribute("rel","stylesheet"),b.setAttribute("type","text/css"),b.setAttribute("href",a),document.getElementsByTagName("head")[0].appendChild(b)},request:{getJson:function(a,b,c){$.ajax({async:!0,url:a.url+"?t="+(new Date).getTime(),type:"GET",data:a.data,success:function(a){return a.message&&c?void c(a):void(b&&b(a))},error:function(a){c&&c(a)}})},getCrossJson:function(a,b){$.ajax({async:!0,url:a.url,type:"GET",dataType:"jsonp",jsonp:a.callbackType||"callback",data:a.data,success:function(a){b&&b(a)},error:function(a){}})},postData:function(b,c){$.ajax({type:b.method||"POST",url:b.url,data:JSON.stringify(b.data)||"{}",success:function(b){return b.result?void(c&&c(b)):void a.msg(b.message)}})},postData2:function(b,c,d){$.ajax({type:b.method||"POST",url:b.url,async:b.async!==!1,dataType:"json",data:{data:JSON.stringify(b.data)||"{}"},success:function(b){var e=b.result||{};return b.message||e.noticeMsg?d&&"function"==typeof d?void d(b):void a.msg(b.message||e.noticeMsg):void(c&&"00000"===b.status&&c(b))},error:function(){d&&"function"==typeof d&&d.apply(null,arguments)}})},postData3:function(b,c,d){$.ajax({type:b.method||"POST",url:b.url,async:b.async!==!1,dataType:"json",data:{data:b.data||"{}"},success:function(b){return b.message?d&&"function"==typeof d?void d(b):void a.msg(b.message):void(c&&"00000"===b.status&&c(b))},error:function(){d&&"function"==typeof d&&d.apply(null,arguments)}})}},cookie:{delCookie:function(a){var b=new Date;b.setTime(b.getTime()-1e4),document.cookie=a+"=a; expires="+b.toGMTString()},setCookie:function(a,b,c,d){var e=new Date;if(b=encodeURIComponent(b),c){e.setTime(e.getTime()+(c?c:0));var f="expires="+e.toUTCString()}if(d)var d="domain="+d;document.cookie=a+"="+b+"; "+f+"; "+d+";Path=/"},getCookie:function(a,b){var c,d=new RegExp("(^| )"+a+"=([^;]*)(;|$)");return(c=document.cookie.match(d))?b?c[2]:decodeURIComponent(c[2]):""}},CheckMobile:function(a){var b=new RegExp("^1(3|4|5|8|7)[0-9]{9}$");return!!b.test(a)},dateHelper:{formatDate:function(a,b){function c(a){return 1===a.length?d[e]:("00"+d[e]).substr((""+d[e]).length)}if(!b)return"";"number"==typeof b&&(b=new Date(1e3*b));var d={"M+":b.getMonth()+1,"d+":b.getDate(),"h+":b.getHours(),"m+":b.getMinutes(),"s+":b.getSeconds(),"q+":Math.floor((b.getMonth()+3)/3),S:b.getMilliseconds(),w:"日一二三四五六".charAt(b.getDay())};a=a.replace(/y{4}/,b.getFullYear()).replace(/y{2}/,b.getFullYear().toString().substring(2));for(var e in d){var f=new RegExp(e);a=a.replace(f,c)}return a},getDatefromText:function(a){return a.split("T")[0]}},tips:{},text:{formatMoney:function(a){return(a/100).toFixed(2)}},state:{checkLogin:function(a){b.request.getJson({url:"/api/users/islogin"},function(b){a(b)})}},page:{openNewTag:function(a){var b=document.createElement("a");document.body.appendChild(b),b.href=a,b.target="_blank",b.click(),document.body.removeChild(b)},showSingleBtn:function(b,c,d){a.confirm(b,{btn:[d||"我知道了"],closeBtn:1,area:["530px"]},function(){c?c():a.closeAll()}),$(".layui-layer-btn0").removeClass("layui-layer-btn0").addClass("layui-layer-btn1")}},url:{getUrlVar:function(a){var b=function(){for(var a,b=[],c=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),d=0;d<c.length;d++)a=c[d].split("="),b.push(a[0]),b[a[0]]=a[1];return b};return b()[a]}},utils:{marginProtectList:function(a){var b={};return $(a).each(function(a){b[this.name]?this.name="":b[this.name]=!0}),a}},timer:function(a){var b,c=a||{},d=c.time||3,e="string"==typeof c.id?document.getElementById(c.id):c.id,f=c.callback||function(){},g=function(){b=setTimeout(g,1e3),e.innerHTML=d,d--,0>d&&(clearTimeout(b),f())};g()}};return b});