## js代码
```javascript
function isBankCard( cardNum ) {
	var sumOdd = 0;
	var sumEven = 0;
	var wei = cardNum.split('').reverse();
	var length = wei.length;
	var i;

	// 转换为数值
	for (i=0; i<length; i++) {
		wei[i] = Number( wei[i] );
	}

	for (i=0; (2*i) < length; i++) {
		sumOdd += wei[ 2*i ];
	}

	for (i=0; (2 * i + 1) < length; i++) {
		if ( (wei[2 * i + 1] * 2) > 9 ) {
			wei[2 * i + 1] = wei[2 * i + 1] * 2 - 9;
		}
	    else {
			wei[2 * i + 1] *= 2;
		}
	    sumEven += wei[2 * i + 1];
	}

	if ((sumOdd + sumEven) % 10 == 0) {
	    return true;
	}
	else {
	    return false;
	}
}

alert( isBankCard('6214836558876492') );
```

### 原java代码

```java
/**
 * Copyright (c) 2006-2015 Hzins Ltd. All Rights Reserved. 
 *  
 * This code is the confidential and proprietary information of   
 * Hzins. You shall not disclose such Confidential Information   
 * and shall use it only in accordance with the terms of the agreements   
 * you entered into with Hzins,http://www.hzins.com.
 *  
 */
package com.hzins.channel.common.utils;

/**
 * <p>
 * 
 * 常用认证 方法
 * 
 * </p>
 * 
 * @author hz15061355
 * @date 2016-7-27 上午9:30:54
 * @version
 */
public final class GeneralVerifyUtils {

    /**
     * 
     * <p>
     * 
     *Luhn 算法验证 是否是 正常的；银行卡号
     *
     * </p>
     * @param cardNum
     * @return
     *  
     * @author	hz15061355 
     * @date	2016-7-27 上午11:46:55
     * @version
     */
    public static boolean isBankCard(String cardNum) {
	int sumOdd = 0;
	int sumEven = 0;
	int length = cardNum.length();
	int[] wei = new int[length];
	for (int i = 0; i < cardNum.length(); i++) {
	    wei[i] = Integer.parseInt(cardNum.substring(length - i - 1, length - i));// 从最末一位开始提取，每一位上的数值
	}
	for (int i = 0; 2 * i < length; i++) {
	    sumOdd += wei[2 * i];
	}
	for (int i = 0; (2 * i + 1) < length; i++) {
	    if ((wei[2 * i + 1] * 2) > 9)
		wei[2 * i + 1] = wei[2 * i + 1] * 2 - 9;
	    else
		wei[2 * i + 1] *= 2;
	    sumEven += wei[2 * i + 1];
	}
	if ((sumOdd + sumEven) % 10 == 0)
	    return true;
	else
	    return false;
    }

    public static void main(String[] args) {
	System.out.println(isBankCard("6214836558876492"));
    }
}

```

### 附规则：

现行 16 位银联卡现行卡号开头 6 位是 622126～622925 之间的，7 到 15 位是银行自定义的，
可能是发卡分行，发卡网点，发卡序号，第 16 位是校验码。

16 位卡号校验位采用 Luhm 校验方法计算：

1，将未带校验位的 15 位卡号从右依次编号 1 到 15，位于奇数位号上的数字乘以 2
2，将奇位乘积的个十位全部相加，再加上所有偶数位上的数字
3，将加法和加上校验位能被 10 整除。

比如卡号：

```java
   6  2  2  5   8  8  1  4   1  4  2  0   7  4  3
*  2     2      2     2      2     2      2     2
--------------------------------------------------
  12  2  4  5  16  8  2  4   2  4  4     14  4  6
```
 
将上面的数字加和：1+2+2+4+5+1+6+8+2+4+2+4+4+1+4+4+6 = 60
 
由于 60 加上 0 才能被 10 整除，所以校验位为 0
 
因此该卡号为 6225 8814 1420 7430


如果其中一位数字换掉的话，直接导致最后校验位错误。

写了个程序进行计算：

```java
public class Test5 {
 
    public static void main(String[] args) {
        String card = "622588141420743";
        System.out.println("      card: " + card);
        System.out.println("check code: " + getBankCardCheckCode(card));
        System.out.println("   card id: " + card + getBankCardCheckCode(card));
    }
     
    /**
     * 校验银行卡卡号
     * @param cardId
     * @return
     */
    public static boolean checkBankCard(String cardId) {
        char bit = getBankCardCheckCode(cardId.substring(0, cardId.length() - 1));
        return cardId.charAt(cardId.length() - 1) == bit;        
    }
     
    /**
     * 从不含校验位的银行卡卡号采用 Luhm 校验算法获得校验位
     * @param nonCheckCodeCardId
     * @return
     */
    public static char getBankCardCheckCode(String nonCheckCodeCardId) {
        if(nonCheckCodeCardId == null || nonCheckCodeCardId.trim().length() == 0
                || !nonCheckCodeCardId.matches("\\d+")) {
            throw new IllegalArgumentException("Bank card code must be number!");
        }
        char[] chs = nonCheckCodeCardId.trim().toCharArray();
        int luhmSum = 0;
        for(int i = chs.length - 1, j = 0; i >= 0; i--, j++) {
            int k = chs[i] - '0';
            if(j % 2 == 0) {
                k *= 2;
                k = k / 10 + k % 10;
            }
            luhmSum += k;            
        }
        return (luhmSum % 10 == 0) ? '0' : (char)((10 - luhmSum % 10) + '0');
    }
}
```